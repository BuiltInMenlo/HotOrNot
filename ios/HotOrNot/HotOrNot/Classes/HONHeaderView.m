//
//  HONHeaderView.m
//  HotOrNot
//
//  Created by Matthew Holcombe on 10.14.12.
//  Copyright (c) 2012 Built in Menlo, LLC. All rights reserved.
//

#import "HONHeaderView.h"

const CGRect kNormalFrame = {-480.0f, -86.0f, 1280.0f, 256.0f};
const CGRect kActiveFrame = {0.01f, 0.01f, 0.01f, 0.01f};


@interface HONHeaderView()
@property (nonatomic, strong) UIImageView *bgImageView;
@property (nonatomic, strong) UILabel *titleLabel;
@end

@implementation HONHeaderView
@synthesize title = _title;

- (id)initWithBranding {
	if ((self = [super initWithFrame:CGRectMake(0.0, 0.0, CGRectGetWidth([UIScreen mainScreen].bounds), (CGRectGetWidth([UIScreen mainScreen].bounds) / 5))])) {
		_bgImageView = [[UIImageView alloc] initWithFrame: self.frame];
		_bgImageView.image = [UIImage imageNamed:@"navHeaderMoji"];
		[self addSubview:_bgImageView];
	}
	
	return (self);
}

- (id)initWithDetail:(NSString *)title {
	if ((self = [super initWithFrame:CGRectMake(0.0, 0.0, 320.0, kNavHeaderHeight)])) {
		_bgImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"orangeBackgroundBlank"]];
		[self addSubview:_bgImageView];
		
		_title = title;
		_titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 10.0, 320, 64.0)];
		_titleLabel.font = [[[HONFontAllocator sharedInstance] helveticaNeueFontBold] fontWithSize:18.0];
		_titleLabel.textColor = [UIColor whiteColor];
		_titleLabel.shadowOffset = CGSizeMake(0.0, 1.0);
		_titleLabel.textAlignment = NSTextAlignmentCenter;
		_titleLabel.text = _title;
		[self addSubview:_titleLabel];
	}
	
	return (self);
}

- (id)initWithTitle:(NSString *)title {
	if ((self = [super initWithFrame:CGRectMake(0.0, 0.0, 320.0, kNavHeaderHeight)])) {
		_bgImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"navHeaderBG"]];
		[self addSubview:_bgImageView];
		
		_title = title;
		_titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(-480.0, -90.0, 1280.0, 256.0)]; //size of label is x4 because scaled down by 0.25
		_titleLabel.font = [[[HONFontAllocator sharedInstance] helveticaNeueFontBold] fontWithSize:75.0];
		_titleLabel.textColor = [UIColor blackColor];
		_titleLabel.shadowOffset = CGSizeMake(0.0, 1.0);
		_titleLabel.textAlignment = NSTextAlignmentCenter;
		_titleLabel.text = _title;
		_titleLabel.transform = CGAffineTransformScale(_titleLabel.transform, 0.25, 0.25);
		[self addSubview:_titleLabel];
	}
	
	return (self);
}


#define ACCEPTABLE_CHARACTERS @"ğŸ˜„ğŸ˜ƒğŸ˜€ğŸ˜Šâ˜ºï¸ğŸ˜‰ğŸ˜ğŸ˜˜ğŸ˜šğŸ˜—ğŸ˜™ğŸ˜œğŸ˜ğŸ˜›ğŸ˜³ğŸ˜ğŸ˜”ğŸ˜ŒğŸ˜’ğŸ˜ğŸ˜£ğŸ˜¢ğŸ˜‚ğŸ˜­ğŸ˜ªğŸ˜¥ğŸ˜°ğŸ˜…ğŸ˜“ğŸ˜©ğŸ˜«ğŸ˜¨ğŸ˜±ğŸ˜ ğŸ˜¡ğŸ˜¤ğŸ˜–ğŸ˜†ğŸ˜‹ğŸ˜·ğŸ˜ğŸ˜´ğŸ˜µğŸ˜²ğŸ˜ŸğŸ˜¦ğŸ˜§ğŸ˜ˆğŸ‘¿ğŸ˜®ğŸ˜¬ğŸ˜ğŸ˜•ğŸ˜¯ğŸ˜¶ğŸ˜‡ğŸ˜ğŸ˜‘ğŸ‘²ğŸ‘³ğŸ‘®ğŸ‘·ğŸ’‚ğŸ‘¶ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘´ğŸ‘µğŸ‘±ğŸ‘¼ğŸ‘¸ğŸ˜ºğŸ˜¸ğŸ˜»ğŸ˜½ğŸ˜¼ğŸ™€ğŸ˜¿ğŸ˜¹ğŸ˜¾ğŸ‘¹ğŸ‘ºğŸ™ˆğŸ™‰ğŸ™ŠğŸ’€ğŸ‘½ğŸ’©ğŸ”¥âœ¨ğŸŒŸğŸ’«ğŸ’¥ğŸ’¢ğŸ’¦ğŸ’§ğŸ’¤ğŸ’¨ğŸ‘‚ğŸ‘€ğŸ‘ƒğŸ‘…ğŸ‘„ğŸ‘ğŸ‘ğŸ‘ŒğŸ‘ŠâœŠâœŒï¸ğŸ‘‹âœ‹ğŸ‘ğŸ‘†ğŸ‘‡ğŸ‘‰ğŸ‘ˆğŸ™ŒğŸ™â˜ï¸ğŸ‘ğŸ’ªğŸš¶ğŸƒğŸ’ƒğŸ‘«ğŸ‘ªğŸ‘¬ğŸ‘­ğŸ’ğŸ’‘ğŸ‘¯ğŸ™†ğŸ™…ğŸ’ğŸ™‹ğŸ’†ğŸ’‡ğŸ’…ğŸ‘°ğŸ™ğŸ™ğŸ™‡ğŸ©ğŸ‘‘ğŸ‘’ğŸ‘ŸğŸ‘ğŸ‘¡ğŸ‘ ğŸ‘¢ğŸ‘•ğŸ‘”ğŸ‘šğŸ‘—ğŸ½ğŸ‘–ğŸ‘˜ğŸ‘™ğŸ’¼ğŸ‘œğŸ‘ğŸ‘›ğŸ‘“ğŸ€ğŸŒ‚ğŸ’„ğŸ’›ğŸ’™ğŸ’œğŸ’šâ¤ï¸ğŸ’”ğŸ’—ğŸ’“ğŸ’•ğŸ’–ğŸ’ğŸ’˜ğŸ’ŒğŸ’‹ğŸ’ğŸ’ğŸ‘¤ğŸ‘¥ğŸ’¬ğŸ‘£ğŸ’­ğŸ¶ğŸºğŸ±ğŸ­ğŸ¹ğŸ°ğŸ¸ğŸ¯ğŸ¨ğŸ»ğŸ·ğŸ½ğŸ®ğŸ—ğŸµğŸ’ğŸ´ğŸ‘ğŸ˜ğŸ¼ğŸ§ğŸ¦ğŸ¤ğŸ¥ğŸ£ğŸ”ğŸğŸ¢ğŸ›ğŸğŸœğŸğŸŒğŸ™ğŸšğŸ ğŸŸğŸ¬ğŸ³ğŸ‹ğŸ„ğŸğŸ€ğŸƒğŸ…ğŸ‡ğŸ‰ğŸğŸğŸ“ğŸ•ğŸ–ğŸğŸ‚ğŸ²ğŸ¡ğŸŠğŸ«ğŸªğŸ†ğŸˆğŸ©ğŸ¾ğŸ’ğŸŒ¸ğŸŒ·ğŸ€ğŸŒ¹ğŸŒ»ğŸŒºğŸğŸƒğŸ‚ğŸŒ¿ğŸŒ¾ğŸ„ğŸŒµğŸŒ´ğŸŒ²ğŸŒ³ğŸŒ°ğŸŒ±ğŸŒ¼ğŸŒğŸŒğŸŒğŸŒšğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒœğŸŒ›ğŸŒ™ğŸŒğŸŒğŸŒğŸŒ‹ğŸŒŒğŸŒ â­ï¸â˜€ï¸â›…ï¸â˜ï¸âš¡ï¸â˜”ï¸â„ï¸â›„ï¸ğŸŒ€ğŸŒğŸŒˆğŸŒŠğŸğŸ’ğŸğŸ’ğŸ“ğŸğŸ†ğŸ‡ğŸğŸ‘ğŸƒğŸ‘»ğŸ…ğŸ„ğŸğŸ‹ğŸ‰ğŸŠğŸˆğŸŒğŸ”®ğŸ¥ğŸ“·ğŸ“¹ğŸ“¼ğŸ’¿ğŸ“€ğŸ’½ğŸ’¾ğŸ’»ğŸ“±â˜ï¸ğŸ“ğŸ“ŸğŸ“ ğŸ“¡ğŸ“ºğŸ“»ğŸ”ŠğŸ”‰ğŸ”ˆğŸ”‡ğŸ””ğŸ”•ğŸ“¢ğŸ“£â³âŒ›ï¸â°âŒšï¸ğŸ”“ğŸ”’ğŸ”ğŸ”ğŸ”‘ğŸ”ğŸ’¡ğŸ”¦ğŸ”†ğŸ”…ğŸ”ŒğŸ”‹ğŸ”ğŸ›ğŸ›€ğŸš¿ğŸš½ğŸ”§ğŸ”©ğŸ”¨ğŸšªğŸš¬ğŸ’£ğŸ”«ğŸ”ªğŸ’ŠğŸ’‰ğŸ’°ğŸ’´ğŸ’µğŸ’·ğŸ’¶ğŸ’³ğŸ’¸ğŸ“²ğŸ“§ğŸ“¥ğŸ“¤âœ‰ï¸ğŸ“©ğŸ“¨ğŸ“¯ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®ğŸ“¦ğŸ“ğŸ“„ğŸ“ƒğŸ“‘ğŸ“ŠğŸ“ˆğŸ“‰ğŸ“œğŸ“‹ğŸ“…ğŸ“†ğŸ“‡ğŸ“ğŸ“‚âœ‚ï¸ğŸ“ŒğŸ“âœ’ï¸âœï¸ğŸ“ğŸ“ğŸ“•ğŸ“—ğŸ“˜ğŸ“™ğŸ““ğŸ“”ğŸ“’ğŸ“šğŸ“–ğŸ”–ğŸ“›ğŸ”¬ğŸ”­ğŸ“°ğŸ¨ğŸ¬ğŸ¤ğŸ§ğŸ¼ğŸµğŸ¶ğŸ¹ğŸ»ğŸºğŸ·ğŸ¸ğŸ‘¾ğŸ®ğŸƒğŸ´ğŸ€„ï¸ğŸ²ğŸ¯ğŸˆğŸ€âš½ï¸âš¾ï¸ğŸ¾ğŸ±ğŸ‰ğŸ³â›³ï¸ğŸšµğŸš´ğŸğŸ‡ğŸ†ğŸ¿ğŸ‚ğŸŠğŸ„ğŸ£â˜•ï¸ğŸµğŸ¶ğŸ¼ğŸºğŸ»ğŸ¸ğŸ¹ğŸ·ğŸ´ğŸ•ğŸ”ğŸŸğŸ—ğŸ–ğŸğŸ›ğŸ¤ğŸ±ğŸ£ğŸ¥ğŸ™ğŸ˜ğŸšğŸœğŸ²ğŸ¢ğŸ¡ğŸ³ğŸğŸ©ğŸ®ğŸ¦ğŸ¨ğŸ§ğŸ‚ğŸ°ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸğŸğŸŠğŸ‹ğŸ’ğŸ‡ğŸ‰ğŸ“ğŸ‘ğŸˆğŸŒğŸğŸğŸ ğŸ†ğŸ…ğŸŒ½ğŸ ğŸ¡ğŸ«ğŸ¢ğŸ£ğŸ¥ğŸ¦ğŸªğŸ©ğŸ¨ğŸ’’â›ªï¸ğŸ¬ğŸ¤ğŸŒ‡ğŸŒ†ğŸ¯ğŸ°â›ºï¸ğŸ­ğŸ—¼ğŸ—¾ğŸ—»ğŸŒ„ğŸŒ…ğŸŒƒğŸ—½ğŸŒ‰ğŸ ğŸ¡â›²ï¸ğŸ¢ğŸš¢â›µï¸ğŸš¤ğŸš£âš“ï¸ğŸš€âœˆï¸ğŸ’ºğŸšğŸš‚ğŸšŠğŸš‰ğŸšğŸš†ğŸš„ğŸš…ğŸšˆğŸš‡ğŸšğŸš‹ğŸšƒğŸšğŸšŒğŸšğŸš™ğŸš˜ğŸš—ğŸš•ğŸš–ğŸš›ğŸššğŸš¨ğŸš“ğŸš”ğŸš’ğŸš‘ğŸšğŸš²ğŸš¡ğŸšŸğŸš ğŸšœğŸ’ˆğŸšğŸ«ğŸš¦ğŸš¥âš ï¸ğŸš§ğŸ”°â›½ï¸ğŸ®ğŸ°â™¨ï¸ğŸ—¿ğŸªğŸ­ğŸ“ğŸš©ğŸ‡¯ğŸ‡µğŸ‡°ğŸ‡·ğŸ‡©ğŸ‡ªğŸ‡¨ğŸ‡³ğŸ‡ºğŸ‡¸ğŸ‡«ğŸ‡·ğŸ‡ªğŸ‡¸ğŸ‡®ğŸ‡¹ğŸ‡·ğŸ‡ºğŸ‡¬ğŸ‡§1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£4ï¸âƒ£5ï¸âƒ£6ï¸âƒ£7ï¸âƒ£8ï¸âƒ£9ï¸âƒ£0ï¸âƒ£ğŸ”ŸğŸ”¢#ï¸âƒ£ğŸ”£â¬†ï¸â¬‡ï¸â¬…ï¸â¡ï¸ğŸ” ğŸ”¡ğŸ”¤â†—ï¸â†–ï¸â†˜ï¸â†™ï¸â†”ï¸â†•ï¸ğŸ”„â—€ï¸â–¶ï¸ğŸ”¼ğŸ”½â†©ï¸â†ªï¸â„¹ï¸âªâ©â«â¬â¤µï¸â¤´ï¸ğŸ†—ğŸ”€ğŸ”ğŸ”‚ğŸ†•ğŸ†™ğŸ†’ğŸ†“ğŸ†–ğŸ“¶ğŸ¦ğŸˆğŸˆ¯ï¸ğŸˆ³ğŸˆµğŸˆ´ğŸˆ²ğŸ‰ğŸˆ¹ğŸˆºğŸˆ¶ğŸˆšï¸ğŸš»ğŸš¹ğŸšºğŸš¼ğŸš¾ğŸš°ğŸš®ğŸ…¿ï¸â™¿ï¸ğŸš­ğŸˆ·ğŸˆ¸ğŸˆ‚â“‚ï¸ğŸ›‚ğŸ›„ğŸ›…ğŸ›ƒğŸ‰‘ãŠ™ï¸ãŠ—ï¸ğŸ†‘ğŸ†˜ğŸ†”ğŸš«ğŸ”ğŸ“µğŸš¯ğŸš±ğŸš³ğŸš·ğŸš¸â›”ï¸âœ³ï¸â‡ï¸ââœ…âœ´ï¸ğŸ’ŸğŸ†šğŸ“³ğŸ“´ğŸ…°ğŸ…±ğŸ†ğŸ…¾ğŸ’ â¿â™»ï¸â™ˆï¸â™‰ï¸â™Šï¸â™‹ï¸â™Œï¸â™ï¸â™ï¸â™ï¸â™ï¸â™‘ï¸â™’ï¸â™“ï¸â›ğŸ”¯ğŸ§ğŸ’¹ğŸ’²ğŸ’±Â©Â®â„¢âŒâ€¼ï¸â‰ï¸â—ï¸â“â•â”â­•ï¸ğŸ”ğŸ”šğŸ”™ğŸ”›ğŸ”œğŸ”ƒğŸ•›ğŸ•§ğŸ•ğŸ•œğŸ•‘ğŸ•ğŸ•’ğŸ•ğŸ•“ğŸ•ŸğŸ•”ğŸ• ğŸ••ğŸ•–ğŸ•—ğŸ•˜ğŸ•™ğŸ•šğŸ•¡ğŸ•¢ğŸ•£ğŸ•¤ğŸ•¥ğŸ•¦âœ–ï¸â•â–â—â™ ï¸â™¥ï¸â™£ï¸â™¦ï¸ğŸ’®ğŸ’¯âœ”ï¸â˜‘ï¸ğŸ”˜ğŸ”—â°ã€°ã€½ï¸ğŸ”±â—¼ï¸â—»ï¸â—¾ï¸â—½ï¸â–ªï¸â–«ï¸ğŸ”ºğŸ”²ğŸ”³âš«ï¸âšªï¸ğŸ”´ğŸ”µğŸ”»â¬œï¸â¬›ï¸ğŸ”¶ğŸ”·ğŸ”¸ğŸ”¹"
- (void)setTitle:(NSString *)title {
	_title = title;
	_titleLabel.text = _title;
	
//	if ([_title rangeOfCharacterFromSet:[NSCharacterSet characterSetWithCharactersInString:ACCEPTABLE_CHARACTERS]].location != NSNotFound) {
//		CGSize scaleSize = CGSizeMake(kActiveFrame.size.width / kNormalFrame.size.width, kActiveFrame.size.height / kNormalFrame.size.height);
//		CGPoint offsetPt = CGPointMake(CGRectGetMidX(kActiveFrame) - CGRectGetMidX(kNormalFrame), CGRectGetMidY(kActiveFrame) - CGRectGetMidY(kNormalFrame));
//		CGAffineTransform transform = CGAffineTransformMake(scaleSize.width, 0.0, 0.0, scaleSize.height, offsetPt.x, offsetPt.y);
//		
//		[UIView animateWithDuration:0.125 delay:0.000
//			 usingSpringWithDamping:0.875 initialSpringVelocity:0.000
//							options:(UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionAllowAnimatedContent)
//		 
//						 animations:^(void) {
//							 _titleLabel.transform = transform;
//						 } completion:^(BOOL finished) {
//							 CGAffineTransform transform = CGAffineTransformMake(1.0, 0.0, 0.0, 1.0, 0.0, 0.0);
//							 [UIView animateWithDuration:0.250 delay:0.000
//								  usingSpringWithDamping:0.250 initialSpringVelocity:0.750
//												 options:UIViewAnimationOptionAllowUserInteraction|UIViewAnimationOptionAllowAnimatedContent
//							  
//											  animations:^(void) {
//												  _titleLabel.transform = transform;
//												  _titleLabel.transform = CGAffineTransformScale(_titleLabel.transform, 0.25, 0.25);
//											  } completion:^(BOOL finished) {
//											  }];
//						 }];
//	}
}

- (void)setFont:(UIFont *)font {
	_titleLabel.font = font;
}

- (void)setTransform:(CGAffineTransform)transform {
	_titleLabel.transform = transform;
}


- (void)addButton:(UIView *)buttonView {
	buttonView.frame = CGRectOffset(buttonView.frame, 0.0, 19.0);
	[self addSubview:buttonView];
}

- (void)leftAlignTitle {
	_titleLabel.textAlignment = NSTextAlignmentLeft;
}


@end
